\section{Related work}\label{Sec: related_work}

%from digital library domain
{\em Data citation.} Principles for data citation have been proposed within the digital libraries community\cite{CODATA2013,FORCE11_2104} 
%by CODATA~\cite{CODATA2013} and FORCE 11~\cite{FORCE11_2104}, 
and include: 1) identification and access to the cited data; 2) persistence of the cited data; and 3) completeness of the reference~\cite{Klump2015,Simons12,BraseSL15,DataCite2016}. 
The community also recognized the importance of citations to aggregate data~\cite{CODATA2013}, as have various scientific communities~\cite{harrow2012gencode, himmelstein2017systematic, mcentyre2015biostudies}. 
%, which couldn't be handled at the same time by previous efforts 
More recently, data citation has captured the attention of database researchers, who formulated computational challenges~\cite{BunemanEtAl2016, DBLP:conf/pods/DavidsonBDMS17}.
To address these challenges, a model of {\em citation views} was defined in \cite{davidson2017model} and implemented in \cite{alawini2017automating,wu2018data}.  However, this work was limited to conjunctive queries and views, and did not address aggregates. 
% constructing citations for {\em aggregated data} has become a major concern. Some principles for data citations have been come up with especially for aggregated data. For example, CODATA \cite{CODATA2013} proposes one such principle, i.e. {\em Citations should facilitate the establishment of provenance of aggregated data}.


%{\em Query rewriting using views with aggregation} 
{\em Query rewriting using views.} %As \cite{wu2018data} claimed, 
Data citation is closely related to the problem of query rewriting using views.
%, which reasons about how to use a set of views $\mathcal{V}$ to ``rewrite'' a given query $Q$.  
Rewriting relies on notions of {\em containment} and {\em equivalence} of queries \cite{halevy2001answering}, and has been extensively studied 
in the context of conjunctive queries \cite{chandra1977optimal, chaudhuri1995optimizing, pottinger2000scalable, afrati2007using} as well as aggregate queries~\cite{cohen2007deciding, cohen1999rewriting}. 
% Unlike conjunctive queries, for which containment and equivalence use a {\em set semantics}, aggregate queries use a {\em bag-set semantics} for containment and equivalence.
%is applied to determine the containment and equivalence between queries, which takes the operands of queries (query result) as set (bag).
Various algorithms have been designed to rewrite aggregate queries.
% using the {\em bag-set semantics}. 
For example, \cite{srivastava1996answering, galindo2001orthogonal} provide algorithms for determining whether a materialized view is usable for answering an aggregate query by considering both conjunctive and aggregate views.
In \cite{zaharioudakis2000answering}, an algorithm is given to handle nested subqueries and multidimensional aggregations in queries and views. However, only standard aggregate functions (e.g. SUM, COUNT) are considered in ~\cite{zaharioudakis2000answering, srivastava1996answering, galindo2001orthogonal}; general aggregate functions (such as
user defined aggregate functions) cannot be used. The problem of general aggregate functions is considered in \cite{cohen2006rewriting}, and \cite{cohen2006user} bridges the gap between theory and practice by providing  implementation suggestions. However, to our knowledge, there is no work which considers how to rewrite queries using \textit{general aggregate views with having clauses}.

{\em Data Provenance.} Data provenance identifies where a piece of data came from and the process by which it arrived in the database \cite{buneman2001and}.  It has been used to track the dependencies between inputs and outputs, detect errors in complex workloads, and provide explanations for debugging purposes. Various formulations of provenance have been studied, such as \textit{why- and where-provenance} \cite{buneman2001and}, \textit{why-not-provenance} \cite{chapman2009not}, and the \textit{provenance semirings} framework %(how-provenance) 
for conjunctive queries \cite{green2007provenance}, aggregate queries \cite{amsterdamer2011provenance} and queries with negation \cite{xu2018provenance}.  This framework has been used to implement several practical provenance-enabled database systems, such as ORCHESTRA \cite{ives2008orchestra} and GProM \cite{arab2018gprom}. The connection between data citation and provenance was discussed in \cite{BunemanEtAl2016} and explored but not formalized in \cite{alawini2018data}. This paper develops those ideas further, provides an implementation based on a provenance-enabled database system, and shows the feasibility of the approach.

